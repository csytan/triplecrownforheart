{% extends "base.html" %}


{% block title %}
    <title>Triple Crown For Heart - Manage</title>
{% end %}


{% block script %}
    <script>
        $(function(){
            $('input.btn-warning').click(function(){
                if (confirm('Are you sure you want to remove this user?')){
                    $(this).closest('form')
                        .find('input[name="action"]')
                        .val('remove');
                } else {
                    return false;
                }
            });
        });
    </script>
{% end %}


{% block content %}
    <div class="page-header">
        <h1>
            {% if user %}
                Edit User
                <small>
                    <a href="{{ user.href }}">{{ user.name }}</a>
                </small>
            {% else %}
                New User
                <small>Triple Crown For Heart</small>
            {% end %}
        </h1>
    </div>
    
    <form class="form-horizontal" method="post" action="">
        {% raw xsrf_form_html() %}
        <input type="hidden" name="edit_token" value="{{ user.edit_token if user else '' }}">
        <input type="hidden" name="action" value="edit">
        <div class="control-group">
            <label class="control-label">Name</label>
            <div class="controls">
                <input type="text" name="name" placeholder="John Doe" value="{{ user.name if user else '' }}">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Email</label>
            <div class="controls">
                <input type="text" name="email" placeholder="johndoe@email.com" value="{{ user.email if user and user.email else '' }}">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Send Email</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" name="send_email" value="1"> Send welcome email
                </label>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Goal $</label>
            <div class="controls">
                <input type="text" name="goal" placeholder="200" value="{{ user.goal if user else '' }}">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Title (optional)</label>
            <div class="controls">
                <input type="text" name="title" value="{{ user.title if user else 'Participant' }}">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Quote (optional)</label>
            <div class="controls">
                <input type="text" name="quote" placeholder="" value="{{ user.quote if user else '' }}">
            </div>
        </div>

        <div class="form-actions">
            {% if user %}
                <input type="submit" class="btn btn-success" value="Save Changes">
                {% if admin %}
                    <input type="submit" class="btn btn-warning" value="Remove User">
                {% end %}
            {% else %}
                <input type="submit" class="btn btn-success" value="Add User">
            {% end %}
        </div>
    </form>
{% end %}

