{% extends "base.html" %}

{% block title %}
	<title>{{ user.name }} - Triple Crown For Heart</title>
{% end %}


{% block style %}
	<style>
		#stats {
			margin-bottom: 30px;
		}
		#stats .progress_bar {
			float: left;
			position: relative;
			width: 35px;
			height: 200px;
			border: 4px solid #bbb;
			border-radius: 10px;
			padding: 3px;
			background: white;
		}
		#stats .progress_bar .bar {
			position: absolute;
			height: 0;
			bottom: 4px;
			width: 35px;
			background: #5BC0DE;
			border-radius: 4px;
		}
		#stats .raised {
			float: left;
			margin-left: 25px;
			width: 330px;
		}
		#stats .total {
			margin-bottom: 15px;
		}
		#stats .support {
			float: left;
			width: 45%;
		}
		#stats .donate {
			float: left;
			width: 170px;
			margin-top: 45px;
		}
		#stats .donate .btn {
			margin-left: 8px;
			margin-bottom: 5px;
			font-size: 18px;
		}
		#stats .donate .help-block {
			text-align: center;
			font-size: 14px;
			color: #777;
		}
		#stats .donate .help-block a {
			color: #666;
			font-weight: bold;
		}
		#stats h2 {
			font-size: 3em;
			margin-bottom: 10px;
		}
		#stats h3 {
			font-size: 2.4em;
			margin-bottom: 5px;
		}
		#stats strong {
			font-size: 1.2em;
			text-transform: uppercase;
		}
		#stats .donate {
			float: right;
		}

		blockquote { 
			position: relative;
		    color: #666;
		    font-size: 1.25em;
		    padding: 30px 5px 30px 30px;
		    font-style: italic;
		    margin: 25px 0;
		}
		blockquote:before, blockquote:after { 
		    position: absolute;
		    font-size: 300%; 
		    color: #ccc; 
		    font-family: Futura;
		}
		blockquote:before { 
		    content: open-quote;
		    left: 7px;
			top: 5px;
		}
		blockquote:after { 
		    content: close-quote; 
		    right: 15px;
			bottom: -15px; 
		}

		.donation {
			margin-bottom: 15px;
		}
		.donation .total {
			padding-top: 5px;
			font-size: 1.5em;
			text-align: center;
		}
	</style>
{% end %}


{% block script %}
	<script>
		jQuery(function($){
			var raised = {{ user.raised }} / {{ user.goal }};
			var height = (raised * 198) + 'px';
			$('#stats .progress_bar .bar').animate({height: height}, 1000);
		});
	</script>
{% end %}


{% block content %}
	<div class="page-header">
		{% if admin %}
			<a href="/{{ user.key.id() }}/{{ user.slug }}/edit" class="btn btn-info pull-right">Edit Profile</a>
		{% end %}
		<h1>
			{{ user.name }}
			<small>Cyclist</small>
		</h1>
	</div>

	<div id="stats" class="well">
		<div class="progress_bar">
			<div class="bar"></div>
		</div>
		<div class="raised">
			<div class="total">
				<h2>{{ format_dollars(user.raised) }}</h2>
				<strong>raised of {{ format_dollars(user.goal) }} goal</strong>
			</div>
			<div style="clear:both"></div>
			<div class="support">
				<h3>{{ user.n_donations }}</h3>
				<strong>donations</strong>
				<br>
				<br>
				<h3>{{ days_left }}</h3>
				<strong>days left</strong>
			</div>
			<div class="donate">
				<a class="btn btn-large btn-success">
					<i class="icon-heart"></i>
					Donate Now
				</a>
				<p class="help-block">
					Proceeds go to the<br>
					<a href="http://www.bcchildrens.ca/Services/ChildrensHeartCentre/default.htm" target="_blank">
						BC Children’s Heart Unit
					</a>
				</p>
			</div>	
		</div>
		<div style="clear:both"></div>
	</div>

    <form id="donate" class="modal hide form-horizontal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="return" value="http://www.caterpi.com/orders?message=payment">
        <input type="hidden" name="notify_url" value="http://www.caterpi.com/paypal_ipn">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="account@caterpi.com">
        <input type="hidden" name="lc" value="CA">
        <input type="hidden" name="item_name" value="Donation">
        <input type="hidden" name="item_number" value="{{ user.key.id() }}">
        <input type="hidden" name="amount" value="">
        <input type="hidden" name="currency_code" value="USD">
        <input type="hidden" name="button_subtype" value="services">
        <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest">
        <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>Donate to the BC Children’s Heart Unit</h3>
        </div>
        <div class="modal-body">
            <div class="control-group">
                <label class="control-label" for="email">Email</label>
                <div class="controls">
                    <input name="email" value="" type="email">
                </div>
            </div>
        </div>
        <div class="modal-footer">
        	<input type="submit" class="btn btn-success" value="Continue to Checkout">
        </div>
    </form>

	{% if user.quote %}
		<blockquote>{{ user.quote }}</blockquote>
	{% end %}

	<div class="page-header">
		<h2>Donations</h2>
	</div>

	<div class="row-fluid donation">
		<div class="span2 total">$45</div>
		<div class="span4">
			<h3>Marie Campbell</h3>
			<p>
				Good job Stewart!
			</p>
		</div>
	</div>
	<div class="row-fluid donation">
		<div class="span2 total">$45</div>
		<div class="span4">
			<h3>Dominik Szopa</h3>
			<p>
				Good job Stewart!
			</p>
		</div>
	</div>
	<div class="row-fluid donation">
		<div class="span2 total">$45</div>
		<div class="span4">
			<h3>Sherman Yee</h3>
			<p>
				Good job Stewart!
			</p>
		</div>
	</div>
{% end %}


